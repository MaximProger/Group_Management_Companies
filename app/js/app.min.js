function priceCeil(n){let s=Math.ceil(100*n)/100;return String(s).replace(".",",")}function imageModifire(n){return n.split(".").slice(0,-1).join(".")+"_220x220_1."+n.slice(2+(n.lastIndexOf(".")-1>>>0))}function changePrice(){this.closest(".product").querySelectorAll(".unit--select").forEach(n=>n.classList.toggle("unit--active"));this.closest(".product").querySelectorAll(".price").forEach(n=>n.classList.toggle("price--active"))}function upCount(){let n=+this.closest(".stepper").querySelector(".product__count").value+1;this.closest(".stepper").querySelector(".product__count").value=n}function downCount(){let n,s=+this.closest(".stepper").querySelector(".product__count").value;n=s>1?s-1:1,this.closest(".stepper").querySelector(".product__count").value=n}function createProduct(n,s,e,c,t,i,r,a,l){const p=c.split("\n").map(n=>n.slice(0,-1)+",");let o="";p.forEach((n,s)=>{p.length-1==s&&(n=n.replace(";",".")),o+=`<a href="#" class="url--link">${n}</a> `});const d=`\n  <div class="product product_horizontal">\n  <span class="product_code">Код: ${n}</span>\n  <div class="product_status_tooltip_container">\n      <span class="product_status">Наличие</span>\n  </div>\n  <div class="product_photo">\n      <a href="#" class="url--link product__link">\n          <img src="${imageModifire(s)}">\n      </a>\n  </div>\n  <div class="product_description">\n      <a href="#" class="product__link">${e}</a>\n  </div>\n  <div class="product_tags hidden-sm">\n      <p>Могут понадобиться:</p>\n      ${o}\n  </div>\n  <div class="product_units">\n      <div class="unit--wrapper">\n          <div class="unit--select unit--active">\n              <p class="ng-binding">За м. кв.</p>\n          </div>\n          <div class="unit--select">\n              <p class="ng-binding">За упаковку</p>\n          </div>\n      </div>\n  </div>\n  <p class="product_price_club_card">\n      <span class="product_price_club_card_text">По карте<br>клуба</span>\n      <span class="goldPrice">\n      <span class="price price--active">${priceCeil(t)}</span>\n      <span class="price">${priceCeil(r)}</span>\n      </span>\n      <span class="rouble__i black__i">\n          <svg version="1.0" id="rouble__b" xmlns="http://www.w3.org/2000/svg" x="0" y="0"\n              width="30px" height="22px" viewBox="0 0 50 50"\n              enable-background="new 0 0 50 50" xml:space="preserve">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#rouble_black">\n              </use>\n          </svg>\n      </span>\n  </p>\n  <p class="product_price_default">\n      <span class="retailPrice">\n      <span class="price price--active">${priceCeil(i)}</span>\n      <span class="price">${priceCeil(a)}</span>\n      </span>\n      <span class="rouble__i black__i">\n          <svg version="1.0" id="rouble__g" xmlns="http://www.w3.org/2000/svg" x="0" y="0"\n              width="30px" height="22px" viewBox="0 0 50 50"\n              enable-background="new 0 0 50 50" xml:space="preserve">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#rouble_gray">\n              </use>\n          </svg>\n      </span>\n  </p>\n  <div class="product_price_points">\n      <p class="ng-binding">Можно купить за 231,75 балла</p>\n  </div>\n  <div class="list--unit-padd"></div>\n  <div class="list--unit-desc">\n      <div class="unit--info">\n          <div class="unit--desc-i"></div>\n          <div class="unit--desc-t">\n              <p>\n                  <span class="ng-binding">Продается упаковками:</span>\n                  <span class="unit--infoInn">1 упак. = 2.47 м. кв. </span>\n              </p>\n          </div>\n      </div>\n  </div>\n  <div class="product__wrapper">\n      <div class="product_count_wrapper">\n          <div class="stepper">\n              <input class="product__count stepper-input" type="text" value="1">\n              <span class="stepper-arrow up"></span>\n              <span class="stepper-arrow down"></span>\n          </div>\n      </div>\n      <span class="btn btn_cart" data-url="/cart/"\n          data-product-id="${l}">\n          <svg class="ic ic_cart">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#cart"></use>\n          </svg>\n          <span class="ng-binding">В корзину</span>\n      </span>\n  </div>\n</div>\n  `;document.querySelector(".products_page").insertAdjacentHTML("beforeend",d)}async function fetchProducts(){const n=await fetch("products.json");(await n.json()).forEach((function(n){createProduct(n.code,n.primaryImageUrl,n.title,n.assocProducts,n.priceGoldAlt,n.priceRetailAlt,n.priceGold,n.priceRetail,n.productId)}));document.querySelectorAll(".stepper-arrow.up").forEach(n=>{n.addEventListener("click",upCount)});document.querySelectorAll(".stepper-arrow.down").forEach(n=>{n.addEventListener("click",downCount)});document.querySelectorAll(".unit--select").forEach(n=>{n.addEventListener("click",changePrice)})}fetchProducts();